//this is an autogenerated file!!
//!!!!!!!!!!
package telegram.raw.functions;

import telegram.raw.core.TlObject;
import telegram.raw.core.primitives.BytesPrimitive;
import telegram.raw.core.primitives.StringPrimitive;
import telegram.raw.core.primitives.VectorPrimitive;
import telegram.raw.core.primitives.integers.IntPrimitive;
import telegram.raw.core.primitives.integers.LongPrimitive;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.util.ArrayList;

public class InitConnection extends TlObject {

    public static final int ID = 0xc1cd5ea9;

    public int api_id;
	public String device_model;
	public String system_version;
	public String app_version;
	public String system_lang_code;
	public String lang_pack;
	public String lang_code;
	public TlObject proxy;
	public TlObject params;
	public TlObject query;

    public InitConnection(int api_id, String device_model, String system_version, String app_version, String system_lang_code, String lang_pack, String lang_code, TlObject proxy, TlObject params, TlObject query) {
        this.api_id = api_id;
		this.device_model = device_model;
		this.system_version = system_version;
		this.app_version = app_version;
		this.system_lang_code = system_lang_code;
		this.lang_pack = lang_pack;
		this.lang_code = lang_code;
		this.proxy = proxy;
		this.params = params;
		this.query = query;
    }

    public static InitConnection read(ByteArrayInputStream bytes) throws IOException {
        int flags = IntPrimitive.read(bytes).getValue();
		int api_id = IntPrimitive.read(bytes).getValue();
		String device_model = StringPrimitive.read(bytes).getValue();
		String system_version = StringPrimitive.read(bytes).getValue();
		String app_version = StringPrimitive.read(bytes).getValue();
		String system_lang_code = StringPrimitive.read(bytes).getValue();
		String lang_pack = StringPrimitive.read(bytes).getValue();
		String lang_code = StringPrimitive.read(bytes).getValue();
		TlObject proxy = (flags & (1 << 0)) != 0 ?  TlObject.read(bytes) : null;
		TlObject params = (flags & (1 << 1)) != 0 ?  TlObject.read(bytes) : null;
		TlObject query = TlObject.read(bytes);
		
		return new InitConnection(api_id, device_model, system_version, app_version, system_lang_code, lang_pack, lang_code, proxy, params, query);
    }

    @Override
    public byte[] write() throws IOException {
        ByteArrayOutputStream bOut = new ByteArrayOutputStream();
		
		bOut.write(new IntPrimitive(ID).write());
		int flags = 0;
		flags |= (this.proxy != null) ? (1 << 0) : 0;
		flags |= (this.params != null) ? (1 << 1) : 0;
		
		
		bOut.write(new IntPrimitive(flags).write());
		bOut.write(new IntPrimitive(this.api_id).write());
		bOut.write(new StringPrimitive(this.device_model).write());
		bOut.write(new StringPrimitive(this.system_version).write());
		bOut.write(new StringPrimitive(this.app_version).write());
		bOut.write(new StringPrimitive(this.system_lang_code).write());
		bOut.write(new StringPrimitive(this.lang_pack).write());
		bOut.write(new StringPrimitive(this.lang_code).write());


		if(this.proxy != null)
			bOut.write(this.proxy.write());
		if(this.params != null)
			bOut.write(this.params.write());
		bOut.write(this.query.write());
		
		return bOut.toByteArray();
    }
}
