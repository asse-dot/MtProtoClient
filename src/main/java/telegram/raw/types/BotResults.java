//this is an autogenerated file!!
//!!!!!!!!!!
package telegram.raw.types.messages;

import telegram.raw.core.TlObject;
import telegram.raw.core.primitives.BytesPrimitive;
import telegram.raw.core.primitives.StringPrimitive;
import telegram.raw.core.primitives.VectorPrimitive;
import telegram.raw.core.primitives.integers.IntPrimitive;
import telegram.raw.core.primitives.integers.LongPrimitive;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.util.ArrayList;

public class BotResults extends TlObject {

    public static final int ID = -534646026;

    public boolean gallery;
	public long query_id;
	public String next_offset;
	public TlObject switch_pm;
	public TlObject switch_webview;
	public ArrayList<TlObject> results;
	public int cache_time;
	public ArrayList<TlObject> users;

    public BotResults(boolean gallery, long query_id, String next_offset, TlObject switch_pm, TlObject switch_webview, ArrayList<TlObject> results, int cache_time, ArrayList<TlObject> users) {
        this.gallery = gallery;
		this.query_id = query_id;
		this.next_offset = next_offset;
		this.switch_pm = switch_pm;
		this.switch_webview = switch_webview;
		this.results = results;
		this.cache_time = cache_time;
		this.users = users;
    }

    public static BotResults read(ByteArrayInputStream bytes) throws IOException {
        int flags = IntPrimitive.read(bytes).getValue();
		boolean gallery = (flags & (1 << 0)) != 0;
		long query_id = LongPrimitive.read(bytes).getValue();
		String next_offset = (flags & (1 << 1)) != 0 ?  StringPrimitive.read(bytes).getValue() : null;
		TlObject switch_pm = (flags & (1 << 2)) != 0 ?  TlObject.read(bytes) : null;
		TlObject switch_webview = (flags & (1 << 3)) != 0 ?  TlObject.read(bytes) : null;
		ArrayList<TlObject> results = ((VectorPrimitive)TlObject.read(bytes)).getValue();
		int cache_time = IntPrimitive.read(bytes).getValue();
		ArrayList<TlObject> users = ((VectorPrimitive)TlObject.read(bytes)).getValue();
		
		return new BotResults(gallery, query_id, next_offset, switch_pm, switch_webview, results, cache_time, users);
    }

    @Override
    public byte[] write() throws IOException {
        ByteArrayOutputStream bOut = new ByteArrayOutputStream();
		
		bOut.write(new IntPrimitive(ID).write());
		int flags = 0;
		flags |= this.gallery ? (1 << 0) : 0;
		flags |= (this.next_offset != null) ? (1 << 1) : 0;
		flags |= (this.switch_pm != null) ? (1 << 2) : 0;
		flags |= (this.switch_webview != null) ? (1 << 3) : 0;
		
		
		bOut.write(new IntPrimitive(flags).write());
		bOut.write(new LongPrimitive(this.query_id).write());
		if(this.next_offset != null)
			bOut.write(new StringPrimitive(this.next_offset).write());
		if(this.switch_pm != null)
			bOut.write(this.switch_pm.write());
		if(this.switch_webview != null)
			bOut.write(this.switch_webview.write());
		bOut.write(new VectorPrimitive(this.results).write());
		bOut.write(new IntPrimitive(this.cache_time).write());
		bOut.write(new VectorPrimitive(this.users).write());
		
		return bOut.toByteArray();
    }
}
